import { parse, parseISO } from "date-fns"
import { PostLayout } from "../../components/PostLayout"
import { ImageWrapper } from "../../components/atoms/ImageWrapper"
export const meta = {
  title: "Hello EAS Build! (Managed Workflow)",
  tagNames: ["expo", "react-native"],
  color1: "#6855F9",
  color2: "rgb(220, 220, 220)",
  createdAt: parse(
    "2021-06-04 17:05:00 +09:00",
    "yyyy-MM-dd HH:mm:ss XXX",
    new Date(),
  ),
  author: "@gaishimo",
  description:
    "æœ€è¿‘ã‚µãƒãƒ¼ãƒˆã•ã‚ŒãŸã€EAS Buildã®Managed Workflowãƒ“ãƒ«ãƒ‰ã‚’è©¦ã—ã¦ã¿ã¾ã™ã€‚",
  imagePath: "/posts/2021-06-04-hello-eas-build-managed/updatedApp.jpeg",
  lastUpdatedAt: parse(
    "2021-06-04 17:05:00 +09:00",
    "yyyy-MM-dd HH:mm:ss XXX",
    new Date(),
  ),
}

export const headlines = [
  { title: "EAS Buildã®Managedãƒ“ãƒ«ãƒ‰ã«ã¤ã„ã¦" },
  { title: "äº‹å‰æº–å‚™" },
  { title: "ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ" },
  { title: "EASè¨­å®š" },
  { title: "è¨­å®š Profileã®è¿½åŠ " },
  { title: "iOSã®ad hoc provisioning profileã®ä½œæˆ" },
  { title: "ãƒ“ãƒ«ãƒ‰ã®å®Ÿè¡Œ" },
  { title: "ç«¯æœ«ã§ã®ã‚¢ãƒ—ãƒªã®å®Ÿè¡Œ" },
  { title: "publishã™ã‚‹" },
  { title: "Publishæ™‚ã®æ³¨æ„ç‚¹" },
  { title: "çµ‚ã‚ã‚Šã«" },
  { title: "å‚è€ƒDocs" },
]

export default props => (
  <PostLayout headlines={headlines} meta={meta}>
    {props.children}
  </PostLayout>
)

## EAS Buildã®Managedãƒ“ãƒ«ãƒ‰ã«ã¤ã„ã¦

EAS Buildã¯ExpoãŒæä¾›ã™ã‚‹ã€ã‚¯ãƒ©ã‚¦ãƒ‰ä¸Šã§React Nativeãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ»Expoãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚¢ãƒ—ãƒªãƒã‚¤ãƒŠãƒªã‚’ä½œæˆã™ã‚‹ãŸã‚ã®ã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚

2020å¹´12æœˆã®æ®µéšã§æ—¢ã«Expo Buildã«ã¤ã„ã¦ã¯ç™ºè¡¨ã•ã‚Œã¦ã„ã¾ã—ãŸãŒã€ãã®æ™‚ç‚¹ã§ã¯ã¾ã Managed Workflowã«ã¯å¯¾å¿œã•ã‚Œã¦ã„ã¾ã›ã‚“ã§ã—ãŸã€‚
[Expo Application Services (EAS): Build and Submit | by Brent Vatne | Exposition](https://blog.expo.io/expo-application-services-eas-build-and-submit-fc1d1476aa2e)

ãã®å¾Œ2021å¹´4æœˆã«Managed Workflowã®ãƒ“ãƒ«ãƒ‰ãŒå¯èƒ½ã«ãªã‚Šã¾ã—ãŸã€‚
[Expo managed workflow in 2021. Part 2: Customizing the runtime | by Brent Vatne | Apr, 2021 | Exposition](https://blog.expo.io/expo-managed-workflow-in-2021-d1c9b68aa10)


ãã‚Œã¾ã§ã‚‚æ—¢å­˜ã®Expoã®ãƒ“ãƒ«ãƒ‰æ–¹å¼(Classicãƒ“ãƒ«ãƒ‰)ã§ Managed Workflowã§ãƒ“ãƒ«ãƒ‰ã¯è¡Œã†ã“ã¨ãŒã§ãã¾ã—ãŸãŒã€EAS Buildã¯ãã‚Œã¨ã¯ç•°ãªã‚‹ç‰¹å¾´ã‚’å‚™ãˆã¦ã„ã¾ã™ã€‚

- ä½¿ã‚ãªã„ä¸è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’å«ã‚ãšã«æ¸ˆã‚€
- ç‹¬è‡ªã®Nativeãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ãŒã§ãã‚‹
- Prebuildã¨ã„ã†ãƒ—ãƒ­ã‚»ã‚¹ãŒã‚ã‚‹ (expo ejectã‚’å†åˆ©ç”¨ã—ã¦Managedãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰é€šå¸¸ã®RNãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«å¤‰æ›)
- å†…éƒ¨é…å¸ƒãŒå¯èƒ½

2021å¹´6æœˆæ™‚ç‚¹ã§ã¯Previewã®æ©Ÿèƒ½ã¨ãªã£ã¦ã„ã¦ã€Priorityãƒ—ãƒ©ãƒ³(æœˆ29$)ã«å…¥ã£ã¦ãªã„ã¨åˆ©ç”¨ã§ãã¾ã›ã‚“ã€‚å¼Šç¤¾ã§ã¯Priority Planã«å…¥ã£ã¦ã„ã‚‹ã®ã§ãã®åˆ©ç‚¹ã‚’æ´»ã‹ã—ã€ã¾ãšã¯ãƒŸãƒ‹ãƒãƒ ãªExpoãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ãƒ“ãƒ«ãƒ‰ã‚’è©¦ã—ã¦ã¿ãŸã„ã¨æ€ã„ã¾ã™ã€‚

## äº‹å‰æº–å‚™

é€šå¸¸Expoã‚’åˆ©ç”¨ã™ã‚‹éš›ã«ã¯expo-cliã‚’åˆ©ç”¨ã—ã¾ã™ãŒã€ãã‚Œã«åŠ ãˆã¦ã€EASç”¨ã®CLIã§ã‚ã‚‹eas-cliã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãŠãã¾ã™ã€‚

```bash
npm install -g expo-cli eas-cli
```

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ

Managed Workflowã®Expoãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’expo initã§ä½œæˆã—ã¾ã™ã€‚

```bash
$ expo init
âœ” What would you like to name your app? â€¦ my-app
âœ” Choose a template: â€º blank (TypeScript)    same as blank but with TypeScript configuration
âœ” Downloaded and extracted project files.
ğŸ§¶ Using Yarn to install packages. Pass --npm to use npm instead.
âœ” Installed JavaScript dependencies.

âœ… Your project is ready!

To run your project, navigate to the directory and run one of the following yarn commands.

- cd my-app
- yarn start # you can open iOS, Android, or web from here, or run them directly with the commands below.
- yarn android
- yarn ios # requires an iOS device or macOS for access to an iOS simulator
- yarn web
```


## EASè¨­å®š

EASãƒ“ãƒ«ãƒ‰ã‚’è¡Œã†ãŸã‚ã«ã¯ã¾ãšEASã®è¨­å®šã‚’ä½œæˆã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚`eas build:configure` ã§ä½œæˆã§ãã¾ã™ã€‚

```bash
$ eas build:configure
ğŸ’¡ The following process will configure your iOS and/or Android project to be compatible with EAS Build. These changes only apply to your local project files and you can safely revert them at any time.

âœ” Which platforms would you like to configure for EAS Build? â€º All

âœ” Generated eas.json
âœ” What would you like your Android application id to be? â€¦ com.gaishimo.example1
âœ” What would you like your iOS bundle identifier to be? â€¦ com.gaishimo.example1

âœ” Can we commit these changes to git for you? â€º Yes
âœ” Commit message: â€¦ Configure EAS Build
âœ” Committed changes

ğŸ‰ Your iOS and Android projects are ready to build.

- Run eas build when you are ready to create your first build.
- Once the build is completed, run eas submit to upload the app to the Apple App Store or Google Play Store
- Learn more about other capabilities of EAS Build: https://docs.expo.io/build/introduction
```

å®Ÿè¡Œã™ã‚‹ã¨EASãƒ“ãƒ«ãƒ‰ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã§ã‚ã‚‹`eas.json`ãŒä»¥ä¸‹ã®å†…å®¹ã§ä½œæˆã•ã‚Œã¾ã™ã€‚

```json
{
  "builds": {
    "android": {
      "release": {
        "workflow": "managed"
      }
    },
    "ios": {
      "release": {
        "workflow": "managed"
      }
    }
  }
}
```

è¨­å®šã¯profileã¨ã„ã†å˜ä½ã§æŒ‡å®šã§ãã¾ã™ã€‚ã“ã“ã§ã¨ã„ã†ã¨"android"ã€"ios"ã®ä¸‹ã®"release"ãŒprofileã§ã™ã€‚profileã®åå‰ã¯ä»»æ„ã®ã‚‚ã®ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ workflowã¯"managed"ã¨ãªã£ã¦ã„ã¾ã™ãŒã€Managed Workflowä»¥å¤–ã®å ´åˆã¯ã“ã®å€¤ãŒ"general"ã«ãªã‚Šã¾ã™ã€‚

ã¾ãŸeas build:configureã®é€”ä¸­ã§app idã«ã¤ã„ã¦å…¥åŠ›ã‚’æ±‚ã‚ã‚‰ã‚Œã¾ã™ãŒã€ã“ã®å€¤ã¯ã¯app.jsonã«åæ˜ ã•ã‚Œã¾ã™ã€‚(`expo.ios.bundleIndentifier` ã¨ `expo.android.package`)


## è¨­å®š Profileã®è¿½åŠ 

releaseç”¨ã®profileã¯æ—¢ã«ä½œæˆã•ã‚Œã¦ã„ã‚‹ã®ã§ã€ä»Šåº¦ã¯æ¤œè¨¼ç’°å¢ƒç”¨ã®profileã‚’è¿½åŠ ã—ã¦ã¿ã¾ã™ã€‚profileåã¯"alpha" ã¨ã—ã¦ãŠãã¾ã™ã€‚

```json
{
  "builds": {
    "android": {
      "release": {
        "workflow": "managed"
      },
      // è¿½åŠ 
      "alpha": {
        "workflow": "managed",
        "releaseChannel": "alpha",
        "distribution": "internal"
      }
    },
    "ios": {
      "release": {
        "workflow": "managed"
      },
      // è¿½åŠ 
      "alpha": {
        "workflow": "managed",
        "releaseChannel": "alpha",
        "distribution": "internal"
      }
    }
  }
}
```

å†…éƒ¨ã§ã®æ¤œè¨¼ç”¨ãªã®ã§"distribution" ã« "internal" ã‚’æŒ‡å®šã—ã¦ã„ã¾ã™ã€‚internalã‚’æŒ‡å®šã™ã‚‹ã¨å†…éƒ¨é…å¸ƒãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚ŠTestFlightã‚„PlayStoreç„¡ã—ã«æ¤œè¨¼ãŒã§ãã¾ã™ã€‚ã¾ãŸOTAç”¨ã®channelã¨ã—ã¦"alpha"ã¨ã„ã†åå‰ã®channelã‚’æŒ‡å®šã—ã¦ã„ã¾ã™ã€‚


## iOSã®ad hoc provisioning profileã®ä½œæˆ

iOSã§å†…éƒ¨é…å¸ƒã™ã‚‹ã«ã¯ã€äº‹å‰ã«ç«¯æœ«ã®UDIDã‚’è¨­å®šã—ãŸad hoc provisioning profileã‚’ä½¿ã£ã¦ãƒ“ãƒ«ãƒ‰ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚Androidã«é–¢ã—ã¦ç‰¹ã«è¨­å®šã¯ä¸è¦ã§ã™ã€‚

ãƒ‡ãƒã‚¤ã‚¹ã‚’è¿½åŠ ã™ã‚‹ã«ã¯ã€`eas device:create` ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

```bash

$ eas device:create
This command lets you register your Apple devices (iPhones and iPads) for internal distribution of your app.
Internal distribution means that you won't need upload your app archive to App Store / Testflight.
Your app archive (.ipa) will be installable on your equipment as long as you sign your application with an adhoc provisiong profile.
The provisioning profile needs to contain the UDIDs (unique identifiers) of your iPhones and iPads.

First of all, please choose the Expo account under which you want to register your devices.
Later, authenticate with Apple and choose your desired Apple Team (if your Apple ID has access to multiple teams).

âœ” You're inside the project directory. Would you like to use gaishimo-omoidasu account? â€¦ yes
â€º Log in to your Apple Developer account to continue
âœ” Apple ID: â€¦ <çœç•¥>
â€º Restoring session /home/gaishimo/.app-store/auth/<çœç•¥>/cookie
â€º Session expired Local session
â€º The password is only used to authenticate with Apple and never stored on EAS servers
  Learn more: https://bit.ly/2VtGWhU
âœ” Password (for <çœç•¥>): â€¦ ********************
â€º Saving Apple ID password to the local Keychain
  Learn more: https://docs.expo.io/distribution/security#keychain
âœ” Logged in New session
â€º Team <çœç•¥> (<çœç•¥> )
â€º Provider <çœç•¥>  (<çœç•¥> )
âœ” How would you like to register your devices? â€º Website - generates a registration URL to be opened on your devices

[QR Code]

Open the following link on your iOS devices (or scan the QR code) and follow the instructions to install the development profile:

https://expo.io/register-device/<çœç•¥>
```

ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ä¸Šã«QRã‚³ãƒ¼ãƒ‰ãŒè¡¨ç¤ºã•ã‚Œã‚‹ãŸã‚ãƒ‡ãƒã‚¤ã‚¹ã‹ã‚‰QRã‚³ãƒ¼ãƒ‰ã‚’èª­ã¿å–ã£ã¦ã‚¢ã‚¯ã‚»ã‚¹ã—ã¾ã™ã€‚


<ImageWrapper width={180}>
  <img alt="Provisioning Profileã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰" src="/posts/2021-06-04-hello-eas-build-managed/downloadProfile.jpeg" width={"100%"} height="auto" />
</ImageWrapper>

ã“ã®ç”»é¢ã‹ã‚‰Provisioning ProfileãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã‚‹ãŸã‚ã€ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—è¨­å®šã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚





## ãƒ“ãƒ«ãƒ‰ã®å®Ÿè¡Œ

ã§ã¯æº–å‚™ãŒã§ããŸã®ã§å®Ÿéš›ã«ãƒ“ãƒ«ãƒ‰ã—ã¦ã¿ã¾ã™ã€‚ãƒ“ãƒ«ãƒ‰ã¯`eas build` ã‚³ãƒãƒ³ãƒ‰ã§è¡Œã„ã¾ã™ã€‚

`--platform`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§å¯¾è±¡OS (android | ios | all)ã‚’æŒ‡å®šã€`--profile`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§å¯¾è±¡profileã‚’æŒ‡å®šã—ã¾ã™ã€‚

```bash
$ eas build --platform all --profile alpha
```

åˆå›å®Ÿè¡Œæ™‚ã¯Androidã®Keystoreã®ä½œæˆã‚’æ±‚ã‚ã‚‰ã‚Œã¾ã™ã€‚ç‹¬è‡ªã®Keystoreã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚

```bash
âœ” Using remote Android credentials (Expo server)
âœ” Generate a new Android Keystore? â€¦ yes
âœ” Created keystore
âœ” Assign a name to your build credentials: â€¦ Build Credentials <çœç•¥>
âœ” Uploaded to EAS 1s
âœ” Using remote iOS credentials (Expo server)
```

æ¬¡ã«ã€Apple Developerã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ã‚µã‚¤ãƒ³ã‚¤ãƒ³ã™ã‚‹ã‹ã©ã†ã‹ã‚’èã‹ã‚Œã¾ã™ã€‚ã‚µã‚¤ãƒ³ã‚¤ãƒ³ã™ã‚Œã°ãƒ“ãƒ«ãƒ‰ã«å¿…è¦ãªæƒ…å ±ã‚’è‡ªå‹•ã§é›†ã‚ã¦ãã¦ãã‚Œã¾ã™ã€‚ã‚µã‚¤ãƒ³ã‚¤ãƒ³ã—ãªã„å ´åˆã¯ã™ã¹ã¦æ‰‹å‹•ã§å…¥åŠ›ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

```bash
If you provide your Apple account credentials we will be able to generate all necessary build credentials and fully validate them.
This is optional, but without Apple account access you will need to provide all the values manually and we can only run minimal validation on them.
âœ” Do you want to log in to your Apple account? â€¦ yes

â€º Log in to your Apple Developer account to continue
âœ” Apple ID: â€¦ <çœç•¥>
```

Distribution CertificateãŒæ—¢ã«å­˜åœ¨ã™ã‚‹å ´åˆã€ãã‚Œã‚’å†åˆ©ç”¨ã™ã‚‹ã‹èã‹ã‚Œã¾ã™ã€‚

```bash
âœ” Fetched Apple distribution certificates
âœ” Reuse this distribution certificate?
Cert ID: <çœç•¥>, Serial number: <çœç•¥>, Team ID: <çœç•¥>, Team name: <çœç•¥> (Company/Organization)
    Created: 9 months ago, Updated: 9 months ago,
    Expires: Sat, 21 Aug 2021 01:42:36 GMT+0000
    ğŸ“² Used by: <çœç•¥> â€¦ yes
Using distribution certificate with serial number <çœç•¥>
```

å«ã‚ã‚‹ãƒ‡ãƒã‚¤ã‚¹ã‚’æŒ‡å®šã—ã¾ã™ã€‚å…ˆç¨‹è¿½åŠ ã—ãŸUDIDãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

```bash
âœ” Select devices for the adhoc build: â€º <çœç•¥>
âœ” Created new profile: *[expo] com.gaishimo.example1 AdHoc <çœç•¥>

```

ä»¥ä¸‹ã€ãƒ“ãƒ«ãƒ‰è¡¨ç¤ºã®å…¨æ–‡ã§ã™ã€‚â€»ä¸€éƒ¨çœç•¥

```bash
$ eas build --platform all --profile alpha
âœ” Linked to project @gaishimo-omoidasu/my-app
âœ” Using remote Android credentials (Expo server)
âœ” Generate a new Android Keystore? â€¦ yes
âœ” Created keystore
âœ” Assign a name to your build credentials: â€¦ Build Credentials <çœç•¥>
âœ” Uploaded to EAS 1s
âœ” Using remote iOS credentials (Expo server)

If you provide your Apple account credentials we will be able to generate all necessary build credentials and fully validate them.
This is optional, but without Apple account access you will need to provide all the values manually and we can only run minimal validation on them.
âœ” Do you want to log in to your Apple account? â€¦ yes

â€º Log in to your Apple Developer account to continue
âœ” Apple ID: â€¦ <çœç•¥>
â€º Restoring session /home/gaishimo/.app-store/auth/<çœç•¥>/cookie
â€º <çœç•¥: Apple Teamå> (<çœç•¥: Apple Team ID>)
â€º <çœç•¥: Providerå>  (<çœç•¥: Provider ID>)
âœ” Logged in Local session
âœ” Bundle identifier registered com.gaishimo.example1
âœ” Synced capabilities: No updates
âœ” Fetched Apple distribution certificates
âœ” Reuse this distribution certificate?
Cert ID: <çœç•¥>, Serial number: <çœç•¥>, Team ID: <çœç•¥>, Team name: <çœç•¥> (Company/Organization)
    Created: 9 months ago, Updated: 9 months ago,
    Expires: Sat, 21 Aug 2021 01:42:36 GMT+0000
    ğŸ“² Used by: <çœç•¥> â€¦ yes
Using distribution certificate with serial number <çœç•¥>
âœ” Select devices for the adhoc build: â€º <çœç•¥>
âœ” Created new profile: *[expo] com.gaishimo.example1 AdHoc <çœç•¥>

Project Credentials Configuration:
  Project: <çœç•¥: Project ID>
  Bundle Identifier: com.gaishimo.example1
  Configuration: Ad Hoc

  Distribution Certificate:
    Serial Number: <çœç•¥>
    Expiration Date: Sat, 21 Aug 2021 01:42:36 GMT+0000
    Apple Team: <çœç•¥> (<çœç•¥> (Company/Organization))
    Updated 9 months ago

  Provisioning Profile:
    Developer Portal ID: <çœç•¥>
    Status: active
    Expiration Date: Sat, 21 Aug 2021 01:42:36 GMT+0000
    Apple Team: <çœç•¥> (<çœç•¥>(Company/Organization))
    Provisioned devices:
    - <çœç•¥> (UDID: <çœç•¥>)
    Updated 2 seconds ago

All credentials are ready to build @gaishimo-omoidasu/my-app (com.gaishimo.example1)

âœ” Uploaded to EAS 1s

Android build details: https://expo.io/accounts/gaishimo-omoidasu/builds/<çœç•¥>
iOS build details: https://expo.io/accounts/gaishimo-omoidasu/builds/<çœç•¥>

Waiting for build to complete. You can press Ctrl+C to exit.
```

ãƒ“ãƒ«ãƒ‰ã®URLãŒè¡¨ç¤ºã•ã‚Œã¦å¾…ã¡çŠ¶æ…‹ã«ãªã‚Šã¾ã™ã€‚ã“ã®ã¾ã¾å¾…ã¡ç¶šã‘ã‚‹ã‹ã€çµ‚äº†ã—ã¦URLã«ç›´æ¥ã—ã¦é€²æ—ã‚’ç¢ºèªã—ã¦ã‚‚æ§‹ã„ã¾ã›ã‚“ã€‚ãƒ“ãƒ«ãƒ‰æ™‚ã«"â€”no-wait"ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä»˜ã‘ã‚‹ã¨ã€ãƒ“ãƒ«ãƒ‰ãŒå§‹ã¾ã£ãŸã‚‰å¾…æ©Ÿãªã—ã§ã™ãã«çµ‚äº†ã—ã¾ã™ã€‚


## ç«¯æœ«ã§ã®ã‚¢ãƒ—ãƒªã®å®Ÿè¡Œ

ãƒ“ãƒ«ãƒ‰ãŒæˆåŠŸã—ãŸã‚‰ãƒ“ãƒ«ãƒ‰ãƒšãƒ¼ã‚¸ã«ç«¯æœ«ã§ã‚¢ã‚¯ã‚»ã‚¹ã—Installãƒœã‚¿ãƒ³ã‚’ã‚¿ãƒƒãƒ—ã—ã¾ã™ã€‚


<ImageWrapper width={180}>
  <img alt="EASãƒ“ãƒ«ãƒ‰ç”»é¢ã‹ã‚‰ã‚¢ãƒ—ãƒªã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰" src="/posts/2021-06-04-hello-eas-build-managed/installApp.png" width={"100%"} height="auto" />
</ImageWrapper>

ã‚¢ãƒ—ãƒªãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ ã•ã‚Œã‚‹ãŸã‚ã€èµ·å‹•ã—ã¦ã¿ã¾ã™ã€‚


<ImageWrapper width={180}>
  <img alt="ç«¯æœ«ãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ ã•ã‚ŒãŸã‚¢ãƒ—ãƒª" src="/posts/2021-06-04-hello-eas-build-managed/installedApp.jpeg" width={"100%"} height="auto" />
</ImageWrapper>

å•é¡Œãªãèµ·å‹•ã§ãã¾ã—ãŸ!


<ImageWrapper width={180}>
  <img alt="èµ·å‹•ã•ã‚ŒãŸã‚¢ãƒ—ãƒª" src="/posts/2021-06-04-hello-eas-build-managed/launchedApp.jpeg" width={"100%"} height="auto" />
</ImageWrapper>

ãã—ã¦é©šãã¹ãã¯ã‚¢ãƒ—ãƒªã‚µã‚¤ã‚ºã§ã™ã€‚

<ImageWrapper width={260}>
  <img alt="èµ·å‹•ã•ã‚ŒãŸã‚¢ãƒ—ãƒª" src="/posts/2021-06-04-hello-eas-build-managed/appSize.png" width={"100%"} height="auto" />
</ImageWrapper>

ã‚µã‚¤ã‚ºãŒã‚ãšã‹9.6MBã§ã™ã€‚ Classicãƒ“ãƒ«ãƒ‰ã®å ´åˆæœ€ä½ã§ã‚‚40MBè¿‘ãã«ãªã£ã¦ã—ã¾ã†ã®ã¨æ¯”ã¹ã‚‹ã¨ã€ç‰¹è³ªã™ã¹ãå°ã•ã•ã§ã™ã€‚Classicãƒ“ãƒ«ãƒ‰ã®Managedãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®å ´åˆã€ä»•çµ„ã¿ä¸Šå¿…è¦ã«ãªã‚Šãã†ãªæœ€ä½é™ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚»ãƒƒãƒˆãŒã™ã¹ã¦å«ã¾ã‚Œã¦ã—ã¾ã†ãŸã‚ã€ã©ã†ã—ã¦ã‚‚ã‚µã‚¤ã‚ºãŒå¤§ãããªã£ã¦ã—ã¾ã„ã¾ã™ã€‚EASãƒ“ãƒ«ãƒ‰ã§ã¯å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã¿ã‚’å«ã‚ã‚‹ãŸã‚ã€ã“ã®å°ã•ã•ãŒå®Ÿç¾ã§ãã¦ã„ã¾ã™ã€‚


## publishã™ã‚‹

æœ€å¾Œã«OTA Updateã‚’ã—ã¦ã¿ãŸã„ã¨æ€ã„ã¾ã™ã€‚ã‚³ãƒ¼ãƒ‰ã‚’ä¸€éƒ¨ä¿®æ­£ã—ã¦æ›´æ–°ã—ã¾ã™ã€‚eas.jsonã®è¨­å®šã§"alpha"ã¨ã„ã†åå‰ã‚’è¨­å®šã—ãŸã®ã§ã€ãã®channelã‚’æŒ‡å®šã—ã¦publishã—ã¦ã¿ã¾ã™ã€‚

```bash
$ expo publish --release-channel alpha

â€º Expo SDK: 41.0.0
â€º Release channel: alpha
â€º Workflow: Managed

Building optimized bundles and generating sourcemaps...
Starting Metro Bundler
Finished building JavaScript bundle in 67896ms.

Bundle                     Size
â”Œ index.ios.js           831 kB
â”œ index.android.js       837 kB
â”œ index.ios.js.map      3.28 MB
â”” index.android.js.map   3.3 MB

ğŸ’¡ JavaScript bundle sizes affect startup time. Learn more: https://expo.fyi/javascript-bundle-sizes

Analyzing assets
Saving assets
No assets changed, skipped.

Processing asset bundle patterns:
- /home/gaishimo/workspace/my-app/**/*

Uploading JavaScript bundles
Publish complete

ğŸ“  Manifest: https://exp.host/<çœç•¥>/index.exp?release-channel=alpha&sdkVersion=41.0.0 Learn more: https://expo.fyi/manifest-url
âš™ï¸   Project page: https://expo.io/<çœç•¥>?release-channel=alpha Learn more: https://expo.fyi/project-page
```

publishãŒå®Œäº†ã—ãŸã‚‰ã‚¢ãƒ—ãƒªã‚’2åº¦ç«‹ã¡ä¸Šã’ç›´ã—ã¾ã™(OTA Updateã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã§åæ˜ ã•ã‚Œã‚‹ãŸã‚)ã€‚

<ImageWrapper width={180}>
  <img alt="æ›´æ–°ã•ã‚ŒãŸã‚¢ãƒ—ãƒª" src="/posts/2021-06-04-hello-eas-build-managed/updatedApp.jpeg" width={"100%"} height="auto" />
</ImageWrapper>

ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒå¤‰ã‚ã£ã¦ã„ã‚‹ã“ã¨ãŒç¢ºèªã§ãã¾ã—ãŸ!


## Publishæ™‚ã®æ³¨æ„ç‚¹

OTA Updateã¯JSã®ã‚³ãƒ¼ãƒ‰ã®ã¿ã—ã‹ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã—ãªã„ãŸã‚ã€ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒå¤‰ã‚ã£ãŸã‚Šã—ã¦ãƒ©ãƒ³ã‚¿ã‚¤ãƒ å´ã¨ã®äº’æ›æ€§ãŒåˆã‚ãªã„JSã‚³ãƒ¼ãƒ‰ã‚’åæ˜ ã—ã¦ã—ã¾ã†ã¨ä¸å…·åˆã‚„ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã™ã‚‹ã“ã¨ãŒã‚ã‚Šå¾—ã¾ã™ã€‚ã§ã™ã®ã§publishã™ã‚‹ã®ã¯ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒå¤‰æ›´ã•ã‚Œã¦ã„ãªã„ã¨ãã«é™å®šã—ã¾ã—ã‚‡ã†ã€‚ã‚‚ã—ã‚‚ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç­‰ãŒå¤‰ã‚ã‚‹ã¨ãã¯æ–°ã—ããƒ“ãƒ«ãƒ‰ã‚’ä½œæˆã—ã¾ã—ã‚‡ã†ã€‚Expoã§ã¯æ–°ã—ã„ãƒã‚¤ãƒŠãƒªã‚’ä½œæˆã™ã‚‹ã”ã¨ã«release channelåã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ã‚’æ¨å¥¨ã—ã¦ã„ã¾ã™ã€‚

[Over-the-air updates - Expo Documentation](https://docs.expo.io/build/updates/#updating-managed-apps-built-with-eas-build)

ã¾ãŸã€ã“ã®è¾ºã‚Šã®åˆ©ä¾¿æ€§ã‚’æ”¹å–„ã™ã‚‹ãŸã‚ã«EAS Updateã¨ã„ã†ã‚µãƒ¼ãƒ“ã‚¹ãŒé–‹ç™ºä¸­ã ãã†ã§ã™ã€‚è©³ç´°ã¯ã¾ã ã‚ã‹ã‚Šã¾ã›ã‚“ãŒã€ä»Šå¾ŒãŒæ¥½ã—ã¿ã§ã™ã€‚

[fyi/eas-update.md at master Â· expo/fyi](https://github.com/expo/fyi/blob/master/eas-update.md)

## çµ‚ã‚ã‚Šã«

ä»Šå›ã¯ã¾ãšEAS Buildã‚’ä½“æ„Ÿã—ã¦ã¿ã¾ã—ãŸã€‚æ¬¡å›ã¯ExpoãŒä»Šã¾ã§ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ãªã‹ã£ãŸãƒ©ã‚¤ãƒ–ãƒ©ãƒªç­‰ã‚’è©¦ã—ã«è¿½åŠ ã—ã¦ãƒ“ãƒ«ãƒ‰ã—ã¦ã¿ã‚ˆã†ã‹ã¨æ€ã„ã¾ã™ã€‚

## å‚è€ƒDocs

- [EAS Build - Expo Documentation](https://docs.expo.io/build/introduction/)
- [fyi/eas-update.md at master Â· expo/fyi](https://github.com/expo/fyi/blob/master/eas-update.md)
- [Expo managed workflow in 2021. Part 2: Customizing the runtime | by Brent Vatne | Apr, 2021 | Exposition](https://blog.expo.io/expo-managed-workflow-in-2021-d1c9b68aa10)
- [Expo Application Services (EAS): Build and Submit | by Brent Vatne | Exposition](https://blog.expo.io/expo-application-services-eas-build-and-submit-fc1d1476aa2e)